(this.webpackJsonpmockups=this.webpackJsonpmockups||[]).push([[0],{52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var c=n(7),a=n.n(c),r=n(26),s=n.n(r),o=(n(52),n(53),n(17)),i=n(12),u=n(13),l=n(63),d=n(42),j=n.n(d),b=n(18),f=(n(54),n(11)),p=n(68),O=n(66),h=n(15),m=n(65),g=n(8),v={pisa:{folder:"pisa",files:["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]},bridge2:{folder:"Bridge2",files:["posx.jpg","negx.jpg","posy.jpg","negy.jpg","posz.jpg","negz.jpg"]},milkyway:{folder:"MilkyWay",files:["dark-s_px.jpg","dark-s_nx.jpg","dark-s_py.jpg","dark-s_ny.jpg","dark-s_pz.jpg","dark-s_nz.jpg"]},angus:{folder:"angus",files:["cube_m00_c00.jpg","cube_m00_c01.jpg","cube_m00_c02.jpg","cube_m00_c03.jpg","cube_m00_c04.jpg","cube_m00_c05.jpg"]}};function x(e){var t=e.preset,n=Object(h.a)(e,["preset"]),c=v[t],a=c.folder,r=c.files,s="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r123/examples/textures/cube/"+a+"/";return Object(g.jsx)(m.a,Object(f.a)({files:r,path:s},n))}function y(e){var t=e.shadows,n=Object(c.useRef)(),a=Object(c.useRef)(),r=Object(c.useRef)(),s=Object(c.useRef)(),o=Object(c.useRef)();return Object(g.jsxs)("group",{children:[Object(g.jsx)("directionalLight",{ref:n,position:[2,3,3],intensity:3,color:"orange"}),Object(g.jsx)("directionalLight",{ref:a,position:[-2,3,3],intensity:3,color:"lightblue"}),Object(g.jsx)("directionalLight",{ref:r,position:[2,1,-3],intensity:4,color:"white"}),Object(g.jsx)("directionalLight",{ref:s,position:[-2,1,-3],intensity:4,color:"white"}),Object(g.jsx)("directionalLight",{ref:o,position:[0,3,3],intensity:2,color:"white",castShadow:t})]})}var w=n(64),k=n(0),S=n(67),C=n(16),L=n.n(C),E=n(22),N=n(62),z=function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},B=n(46);function R(e){var t=e.value,n=e.setValue,c=e.min,a=e.max,r=e.step,s=void 0===r?1:r;return Object(g.jsx)(B.Range,{step:s,min:c,max:a,values:[t],onChange:function(e){return n(e[0])},renderTrack:function(e){var t=e.props,n=e.children;return Object(g.jsx)("div",{className:"rangeBackground",children:Object(g.jsx)("div",{ref:t.ref,className:"rangeTrack",children:n})})},renderThumb:function(e){var t=e.props;return Object(g.jsx)("div",Object(f.a)(Object(f.a)({},t),{},{className:"rangeThumb"}))}})}n(60);function M(e){var t=e.color,n=void 0===t?"FFFFFF":t,a=e.metalness,r=void 0===a?0:a,s=e.roughness,o=void 0===s?.2:s,u=e.img,l=void 0===u?null:u,d=e.geometry,j=void 0===d?null:d,b=e.selectable,f=void 0===b||b,p=e.selected,O=e.setSelected,h=Object(c.useRef)(),m=Object(c.useRef)(),v=Object(c.useRef)(),x=Object(c.useState)("white"),y=Object(i.a)(x,2),w=y[0],S=y[1],C=Object(c.useRef)(),B=Object(c.useState)(o),M=Object(i.a)(B,2),_=M[0],D=M[1],P=Object(c.useState)(l),F=Object(i.a)(P,2),I=F[0],U=F[1],A=Object(c.useState)(!1),G=Object(i.a)(A,2),K=G[0],T=G[1],V=function(){var e=Object(E.a)(L.a.mark((function e(t){var n,c,a,r,s,o;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],c=n.type,e.next=4,n.arrayBuffer();case 4:a=e.sent,r=new Blob([a],{type:c}),s=window.URL||window.webkitURL,o=s.createObjectURL(r),U(o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){h.current.roughness=_}),[_]),Object(c.useEffect)((function(){K?document.body.classList.add("pointing"):document.body.classList.remove("pointing")}),[K]),Object(c.useEffect)((function(){if(p===j.uuid){if(v.current){var e=h.current.color,t=e.r,n=e.g,c=e.b,a=function(e,t,n){return"#"+z(e)+z(t)+z(n)}(Math.floor(255*t),Math.floor(255*n),Math.floor(255*c));v.current.value=a,S(a)}C.current.checked=Boolean(h.current.metalness),D(o)}}),[p]),Object(c.useEffect)((function(){p!==j.uuid||f||O(null)}),[f]),Object(c.useEffect)((function(){"string"===typeof I&&(new k.TextureLoader).load(I,(function(e){e.flipY=!1,e.encoding=k.sRGBEncoding,h.current.map=e,h.current.needsUpdate=!0}))}),[I]);return Object(g.jsxs)("group",{castShadow:!0,receiveShadow:!0,children:[Object(g.jsx)("mesh",{onPointerEnter:function(e){f&&(T(!0),e.stopPropagation())},onPointerLeave:function(e){K&&(T(!1),e.stopPropagation())},onClick:function(e){K&&f&&(O(j.uuid),e.stopPropagation())},onPointerMissed:function(e){p===j.uuid&&(O(null),e.stopPropagation())},castShadow:!0,receiveShadow:!0,geometry:j,children:Object(g.jsx)("meshStandardMaterial",{ref:h,color:n,side:k.DoubleSide,metalness:r,roughness:o,emissive:K?"orange":"white",emissiveIntensity:K?5:0,map:l})}),p===j.uuid&&Object(g.jsx)(N.a,{position:j.boundingBox.max,children:Object(g.jsxs)("div",{className:"materialPopup",children:[!l&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("p",{children:"Color"}),Object(g.jsx)("input",{type:"color",ref:v,onChange:function(){v.current&&h.current.color.set(function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,c){return t+t+n+n+c+c}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgb(".concat(parseInt(t[1],16),", ").concat(parseInt(t[2],16),", ").concat(parseInt(t[3],16),")")}(v.current.value)),v.current&&S(v.current.value)},style:{backgroundColor:w}})]}),l&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("p",{children:"Image"}),Object(g.jsx)("input",{type:"file",ref:m,onChange:V})]}),Object(g.jsx)("p",{children:"Metal"}),Object(g.jsx)("input",{type:"checkbox",id:"switch",ref:C,onChange:function(){h.current.metalness=C.current.checked?1:0}}),Object(g.jsx)("label",{for:"switch",children:"Toggle"}),Object(g.jsx)("p",{children:"Roughness"}),Object(g.jsx)(R,{min:0,max:1,step:.01,value:_,setValue:D})]})})]})}function _(e){var t=e.tool,n=e.orbit,r=e.activeModel,s=e.setActiveModel,o=e.mockupUuid,u=Object(c.useRef)(),l=Object(c.useRef)(),d=Object(c.useState)("translate"),j=Object(i.a)(d,2),b=j[0],p=j[1],O=Object(c.useState)(null),h=Object(i.a)(O,2),m=h[0],v=h[1];Object(c.useEffect)((function(){["translate","rotate","scale"].includes(t)?p(t):s(null)}),[t]);Object(c.useEffect)((function(){if(l.current&&n.current){var e=l.current;e.setMode(b);var t=function(e){return n.current.enabled=!e.value};return e.addEventListener("dragging-changed",t),function(){return e.removeEventListener("dragging-changed",t)}}}));var x=function(){return["translate","rotate","scale"].includes(t)&&r===u.current},y=a.a.Children.toArray(e.children);return Object(g.jsx)(S.a,{ref:l,enabled:x,size:x()?1:0,children:Object(g.jsx)("group",Object(f.a)(Object(f.a)({},e),{},{dispose:null,ref:u,mockupUuid:o,onPointerOver:function(){["translate","rotate","scale"].includes(t)&&document.body.classList.add("pointing")},onPointerLeave:function(){["translate","rotate","scale"].includes(t)&&document.body.classList.remove("pointing")},onClick:function(e){["translate","rotate","scale"].includes(t)&&s(u.current),e.stopPropagation()},children:y.map((function(e){if(void 0!==e.props.geometry){var n=e.props.material;return Object(g.jsx)(M,{geometry:e.props.geometry,color:n.map?new k.Color("rgb(127,127,127)"):n.color,metalness:n.metalness,roughness:n.roughness,img:n.map,selectable:n.name.includes(".editable")&&"materials"===t,selected:m,setSelected:v},e.props.geometry.uuid)}}))}))})}var D=n.p+"static/media/phone.2756fbde.gltf";function P(e){var t=Object(w.a)(D),n=t.nodes,c=t.materials;return Object(g.jsxs)(_,Object(f.a)(Object(f.a)({},e),{},{children:[Object(g.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Buttons.geometry,material:c["Buttons.editable"]}),Object(g.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Flash.geometry,material:c.Flash}),Object(g.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Bezel.geometry,material:c["Bezel.editable"]}),Object(g.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Body.geometry,material:c["Body.editable"]}),Object(g.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Lenses.geometry,material:c.Lenses}),Object(g.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Screen.geometry,material:c["Screen.editable"]})]}))}w.a.preload(D);var F=n.p+"static/media/suzanne.8371d4f0.gltf";function I(e){var t=Object(w.a)(F),n=t.nodes,c=t.materials;return Object(g.jsx)(_,Object(f.a)(Object(f.a)({},e),{},{children:Object(g.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Suzanne.geometry,material:c["Material.001.editable"]})}))}w.a.preload(F);var U=function(e){var t=e.groundShadows,n=e.objectShadows,a=e.orbitEnabled,r=e.doDownload,s=e.setDoDownload,o=e.width,l=e.height,d=e.tool,j=e.mockups,b=e.removeMockup,h=Object(c.useRef)(),m=Object(c.useState)(null),v=Object(i.a)(m,2),w=v[0],k=v[1];Object(u.b)((function(e){return function(e){if(r){var t=e.gl.domElement.toDataURL(),n=document.createElement("a");n.href=t,n.download="mockup_".concat(o,"x").concat(l,".png"),n.click(),s(!1)}}(e)}));var S=function(e){["Backspace","Delete"].includes(e.code)&&["translate","rotate","scale"].includes(d)&&w&&b(w.mockupUuid)};return Object(c.useEffect)((function(){return window.addEventListener("keyup",S),function(){window.removeEventListener("keyup",S)}}),[w]),Object(g.jsx)(c.Suspense,{fallback:null,children:Object(g.jsxs)("scene",{children:[Object(g.jsx)(p.a,{makeDefault:!0,enabled:a,ref:h,target:[0,.7,0]}),Object(g.jsx)(x,{preset:"bridge2"}),Object(g.jsx)(y,{shadows:n}),Object(g.jsx)("group",{position:[0,0,0],dispose:null,children:j.map((function(e){var t={key:e.key,tool:d,orbit:h,activeModel:w,setActiveModel:k,mockupUuid:e.key};switch(e.type){case"phone":return Object(g.jsx)(P,Object(f.a)({},t));case"suzanne":return Object(g.jsx)(I,Object(f.a)({},t))}}))}),Object(g.jsx)(O.a,{rotation:[Math.PI/2,0,0],position:[0,-7,0],opacity:.75,width:40,height:40,blur:1,far:9}),t&&Object(g.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[0,0,0],receiveShadow:!0,castShadow:!0,children:[Object(g.jsx)("planeBufferGeometry",{attach:"geometry",args:[15,15]}),Object(g.jsx)("shadowMaterial",{attach:"material",opacity:.4})]}),["translate","rotate","scale"].includes(d)&&Object(g.jsx)("gridHelper",{position:[0,0,0],args:[15,20,"white","#585858"]})]})})},A={phone:"Smartphone",suzanne:"Suzanne"};var G=function(){var e,t=Object(c.useState)(!1),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!0),d=Object(i.a)(s,2),f=d[0],p=d[1],O=Object(c.useState)(20),h=Object(i.a)(O,2),m=h[0],v=h[1],x=Object(c.useState)(!0),y=Object(i.a)(x,2),w=y[0],k=y[1],S=Object(c.useState)(!1),C=Object(i.a)(S,2),L=C[0],E=C[1],N=Object(c.useState)(""),z=Object(i.a)(N,2),B=z[0],M=z[1],_=Object(c.useState)([]),D=Object(i.a)(_,2),P=D[0],F=D[1],I=Object(c.useState)(!1),G=Object(i.a)(I,2),K=G[0],T=G[1],V=Object(c.useRef)(),W=Object(c.useRef)(),H=Object(c.useRef)(),J=Object(c.useRef)(),$=Object(c.useState)(!1),Q=Object(i.a)($,2),Y=Q[0],q=Q[1],X=Object(c.useState)(1),Z=Object(i.a)(X,2),ee=Z[0],te=Z[1],ne=function(e){var t={Space:0,Digit1:0,KeyM:1,KeyF:1,Digit2:1,KeyQ:2,KeyG:2,Digit3:2,KeyW:3,KeyR:3,Digit4:3,KeyE:4,KeyS:4,Digit5:4};e.code in t&&te(t[e.code])},ce=function(){(function(e){var t=0==(e=""+e).indexOf("#"),n=0==e.indexOf("rgb");if(t){var c,a=7==e.length;if(c=e.substr(1).match(a?/(\S{2})/g:/(\S{1})/g))var r=parseInt(c[0]+(a?"":c[0]),16),s=parseInt(c[1]+(a?"":c[1]),16),o=parseInt(c[2]+(a?"":c[2]),16)}n&&(c=e.match(/(\d+){3}/g))&&(r=c[0],s=c[1],o=c[2]);if("undefined"!=typeof r)return(299*r+587*s+114*o)/1e3})(V.current.value)>50?document.body.classList.remove("dark"):document.body.classList.add("dark")},ae=function(){document.getElementsByClassName("App")[0].style.backgroundColor=V.current.value,M(V.current.value),E(!1),ce()},re=function(){var e=Math.max(1,W.current.value),t=Math.max(1,H.current.value),n=document.getElementsByClassName("canvasContainer")[0];n.style.width="".concat(e,"px"),n.style.height="".concat(t,"px");var c=window.innerWidth/e,a=window.innerHeight/t,r=Math.min(c,a);r=r<1?r-.02:1,J.current.style.transform="scale(".concat(r,")")},se=function(e){F((function(t){return[].concat(Object(o.a)(t),[{key:j()(),type:e}])})),T(!1)};return Object(c.useEffect)((function(){L?(document.getElementsByClassName("App")[0].classList.add("alphaGrid"),J.current.classList.add("alphaGrid"),document.body.classList.remove("dark")):(document.getElementsByClassName("App")[0].classList.remove("alphaGrid"),J.current.classList.remove("alphaGrid"),ce())}),[L]),Object(c.useEffect)((function(){return window.addEventListener("resize",re),window.addEventListener("keypress",ne),W.current.value=1920,H.current.value=1080,v(20),V.current.value="#8A4CE6",ae(),E(!0),re(),se("phone"),function(){window.removeEventListener("resize",re),window.removeEventListener("keypress",ne)}}),[]),Object(g.jsxs)("div",{className:"scene",children:[Object(g.jsxs)("div",{className:"toolbar",children:[Object(g.jsx)("button",{className:0===ee?"active":"",onClick:function(){return te(0)},children:Object(g.jsx)(b.g,{size:16})}),Object(g.jsx)("div",{className:"hSpacer"}),Object(g.jsx)("button",{className:1===ee?"active":"",onClick:function(){return te(1)},children:Object(g.jsx)(b.f,{size:16})}),Object(g.jsx)("div",{className:"hSpacer"}),Object(g.jsx)("button",{className:2===ee?"active":"",onClick:function(){return te(2)},children:Object(g.jsx)(b.b,{size:16})}),Object(g.jsx)("button",{className:3===ee?"active":"",onClick:function(){return te(3)},children:Object(g.jsx)(b.k,{size:16})}),Object(g.jsx)("button",{className:4===ee?"active":"",onClick:function(){return te(4)},children:Object(g.jsx)(b.e,{size:16})})]}),Object(g.jsxs)("div",{className:"cameraSettings",children:[Object(g.jsx)("input",{type:"number",onChange:re,ref:W}),Object(g.jsx)(b.l,{size:16}),Object(g.jsx)("input",{type:"number",onChange:re,ref:H}),Object(g.jsx)(R,{value:m,setValue:v,min:10,max:50})]}),Object(g.jsxs)("div",{className:"viewportSettings",children:[Object(g.jsx)("button",{className:L?"":"active",onClick:function(){return E(!L)},tooltip:"Background",children:Object(g.jsx)(b.a,{size:16})}),Object(g.jsx)("input",{type:"color",onChange:ae,ref:V,style:{backgroundColor:null===(e=V.current)||void 0===e?void 0:e.value}}),Object(g.jsx)("div",{className:"hSpacer"}),Object(g.jsx)("button",{className:f?"active":"",onClick:function(){return p(!f)},tooltip:"Shadows",children:Object(g.jsx)(b.h,{size:16})}),Object(g.jsx)("button",{className:a&&f?"active":"",onClick:function(){return r(!a)},tooltip:"Ground Shadows",children:Object(g.jsx)(b.d,{size:16})})]}),Object(g.jsx)("button",{className:w?"lockViewBtn":"lockViewBtn active",onClick:function(){return k(!w)},children:Object(g.jsx)(b.i,{size:16})}),Object(g.jsx)("div",{className:"addPopup",style:{transform:K?"scale(100%)":"scale(0%)"},children:Object.keys(A).map((function(e){return Object(g.jsxs)("button",{className:"addModelBtn",onClick:function(){return se(e)},children:[Object(g.jsx)(b.j,{size:10,style:{marginRight:"8px"}}),A[e]]},e)}))}),Object(g.jsx)("button",{className:"addBtn",onClick:function(){return T((function(e){return!e}))},children:Object(g.jsx)(b.j,{size:16})}),Object(g.jsx)("button",{className:"downloadBtn",onClick:function(){return q(!0)},children:Object(g.jsx)(b.c,{size:16})}),Object(g.jsx)("div",{className:"canvasContainer",children:Object(g.jsxs)(u.a,{shadows:!0,ref:J,gl:{preserveDrawingBuffer:!0,antialias:!0},children:[Object(g.jsx)(l.a,{makeDefault:!0,fov:m,position:[-3,-1,4]}),Object(g.jsx)(U,{groundShadows:a,objectShadows:f,orbitEnabled:w,doDownload:Y,setDoDownload:q,width:W.current?W.current.value:0,height:H.current?H.current.value:0,tool:["grab","materials","translate","rotate","scale"][ee],mockups:P,removeMockup:function(e){F((function(t){return t.filter((function(t){return t.key!==e}))}))}}),!L&&Object(g.jsx)("color",{attach:"background",args:[B]})]})})]})};var K=function(){return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(G,{})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(K,{})}),document.getElementById("root")),T()}},[[61,1,2]]]);
//# sourceMappingURL=main.05171273.chunk.js.map