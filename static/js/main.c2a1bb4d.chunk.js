(this.webpackJsonpmockups=this.webpackJsonpmockups||[]).push([[0],{51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var c=n(7),o=n.n(c),a=n(26),r=n.n(a),s=(n(51),n(52),n(17)),i=n(12),l=n(13),u=n(63),j=n(40),d=n.n(j),b=n(18),p=(n(53),n(11)),h=n(68),g=n(66),f=n(15),O=n(65),m=n(9),v={pisa:{folder:"pisa",files:["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]},bridge2:{folder:"Bridge2",files:["posx.jpg","negx.jpg","posy.jpg","negy.jpg","posz.jpg","negz.jpg"]},milkyway:{folder:"MilkyWay",files:["dark-s_px.jpg","dark-s_nx.jpg","dark-s_py.jpg","dark-s_ny.jpg","dark-s_pz.jpg","dark-s_nz.jpg"]},angus:{folder:"angus",files:["cube_m00_c00.jpg","cube_m00_c01.jpg","cube_m00_c02.jpg","cube_m00_c03.jpg","cube_m00_c04.jpg","cube_m00_c05.jpg"]}};function x(e){var t=e.preset,n=Object(f.a)(e,["preset"]),c=v[t],o=c.folder,a=c.files,r="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r123/examples/textures/cube/"+o+"/";return Object(m.jsx)(O.a,Object(p.a)({files:a,path:r},n))}function w(e){var t=e.shadows,n=Object(c.useRef)(),o=Object(c.useRef)(),a=Object(c.useRef)(),r=Object(c.useRef)();return Object(m.jsxs)("group",{children:[Object(m.jsx)("directionalLight",{ref:n,position:[2,3,3],intensity:3,color:"orange",castShadow:t}),Object(m.jsx)("directionalLight",{ref:o,position:[-2,3,3],intensity:3,color:"lightblue"}),Object(m.jsx)("directionalLight",{ref:a,position:[2,1,-3],intensity:4,color:"white"}),Object(m.jsx)("directionalLight",{ref:r,position:[-2,1,-3],intensity:4,color:"white"})]})}var y=n(64),S=n(0),k=n(67),C=n(16),L=n.n(C),N=n(22),z=n(62);n(58);function E(e){var t=e.color,n=void 0===t?"FFFFFF":t,o=e.metalness,a=void 0===o?0:o,r=e.roughness,s=void 0===r?.2:r,l=e.img,u=void 0===l?null:l,j=e.geometry,d=void 0===j?null:j,b=e.selectable,p=void 0===b||b,h=e.selected,g=e.setSelected,f=Object(c.useRef)(),O=Object(c.useRef)(),v=Object(c.useRef)(),x=Object(c.useState)("white"),w=Object(i.a)(x,2),y=w[0],k=w[1],C=Object(c.useRef)(),E=Object(c.useRef)(),M=Object(c.useState)(u),D=Object(i.a)(M,2),_=D[0],F=D[1],P=Object(c.useState)(!1),T=Object(i.a)(P,2),I=T[0],A=T[1],K=function(){var e=Object(N.a)(L.a.mark((function e(t){var n,c,o,a,r,s;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],c=n.type,e.next=4,n.arrayBuffer();case 4:o=e.sent,a=new Blob([o],{type:c}),r=window.URL||window.webkitURL,s=r.createObjectURL(a),F(s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){I?document.body.classList.add("pointing"):document.body.classList.remove("pointing")}),[I]),Object(c.useEffect)((function(){if(h===d.uuid){if(v.current){var e=f.current.color,t=e.r,n=e.g,c=e.b,o=function(e,t,n){return"#"+B(e)+B(t)+B(n)}(Math.floor(255*t),Math.floor(255*n),Math.floor(255*c));v.current.value=o,k(o)}C.current.checked=Boolean(f.current.metalness),E.current.value=f.current.roughness}}),[h]),Object(c.useEffect)((function(){h!==d.uuid||p||g(null)}),[p]),Object(c.useEffect)((function(){"string"===typeof _&&(new S.TextureLoader).load(_,(function(e){e.flipY=!1,e.encoding=S.sRGBEncoding,f.current.map=e,f.current.needsUpdate=!0}))}),[_]);return Object(m.jsxs)("group",{castShadow:!0,receiveShadow:!0,children:[Object(m.jsx)("mesh",{onPointerEnter:function(e){p&&(A(!0),e.stopPropagation())},onPointerLeave:function(e){I&&(A(!1),e.stopPropagation())},onClick:function(e){I&&p&&(g(d.uuid),e.stopPropagation())},onPointerMissed:function(e){h===d.uuid&&(g(null),e.stopPropagation())},castShadow:!0,receiveShadow:!0,geometry:d,children:Object(m.jsx)("meshStandardMaterial",{ref:f,color:n,side:S.DoubleSide,metalness:a,roughness:s,emissive:I?"orange":"white",emissiveIntensity:I?5:0,map:u})}),h===d.uuid&&Object(m.jsx)(z.a,{position:d.boundingBox.max,children:Object(m.jsxs)("div",{className:"materialPopup",children:[!u&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:"Color"}),Object(m.jsx)("input",{type:"color",ref:v,onChange:function(){v.current&&f.current.color.set(R(v.current.value)),v.current&&k(v.current.value)},style:{backgroundColor:y}})]}),u&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:"Image"}),Object(m.jsx)("input",{type:"file",ref:O,onChange:K})]}),Object(m.jsx)("p",{children:"Metal"}),Object(m.jsx)("input",{type:"checkbox",ref:C,onChange:function(){f.current.metalness=C.current.checked?1:0}}),Object(m.jsx)("p",{children:"Roughness"}),Object(m.jsx)("input",{type:"range",ref:E,min:"0",max:"1",step:.01,onChange:function(){f.current.roughness=E.current.value}})]})})]})}var R=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,c){return t+t+n+n+c+c}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgb(".concat(parseInt(t[1],16),", ").concat(parseInt(t[2],16),", ").concat(parseInt(t[3],16),")")};function B(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function M(e){var t=e.tool,n=e.orbit,a=e.activeModel,r=e.setActiveModel,s=Object(c.useRef)(),l=Object(c.useRef)(),u=Object(c.useState)("translate"),j=Object(i.a)(u,2),d=j[0],b=j[1],h=Object(c.useState)(null),g=Object(i.a)(h,2),f=g[0],O=g[1];Object(c.useEffect)((function(){["translate","rotate","scale"].includes(t)?b(t):r(null)}),[t]);Object(c.useEffect)((function(){if(l.current&&n.current){var e=l.current;e.setMode(d);var t=function(e){return n.current.enabled=!e.value};return e.addEventListener("dragging-changed",t),function(){return e.removeEventListener("dragging-changed",t)}}}));var v=function(){return["translate","rotate","scale"].includes(t)&&a===s.current},x=o.a.Children.toArray(e.children);return Object(m.jsx)(k.a,{ref:l,enabled:v,size:v()?1:0,children:Object(m.jsx)("group",Object(p.a)(Object(p.a)({},e),{},{dispose:null,ref:s,onPointerOver:function(){["translate","rotate","scale"].includes(t)&&document.body.classList.add("pointing")},onPointerLeave:function(){["translate","rotate","scale"].includes(t)&&document.body.classList.remove("pointing")},onClick:function(e){["translate","rotate","scale"].includes(t)&&r(s.current),e.stopPropagation()},children:x.map((function(e){if(void 0!==e.props.geometry){var n=e.props.material;return Object(m.jsx)(E,{geometry:e.props.geometry,color:n.map?new S.Color("rgb(127,127,127)"):n.color,metalness:n.metalness,roughness:n.roughness,img:n.map,selectable:n.name.includes(".editable")&&"materials"===t,selected:f,setSelected:O},e.props.geometry.uuid)}}))}))})}var D=n.p+"static/media/phone.2756fbde.gltf";function _(e){var t=Object(y.a)(D),n=t.nodes,c=t.materials;return Object(m.jsxs)(M,Object(p.a)(Object(p.a)({},e),{},{children:[Object(m.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Buttons.geometry,material:c["Buttons.editable"]}),Object(m.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Flash.geometry,material:c.Flash}),Object(m.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Bezel.geometry,material:c["Bezel.editable"]}),Object(m.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Body.geometry,material:c["Body.editable"]}),Object(m.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Lenses.geometry,material:c.Lenses}),Object(m.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Screen.geometry,material:c["Screen.editable"]})]}))}y.a.preload(D);var F=n.p+"static/media/suzanne.8371d4f0.gltf";function P(e){var t=Object(y.a)(F),n=t.nodes,c=t.materials;return Object(m.jsx)(M,Object(p.a)(Object(p.a)({},e),{},{children:Object(m.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Suzanne.geometry,material:c["Material.001.editable"]})}))}y.a.preload(F);var T=function(e){var t=e.groundShadows,n=e.objectShadows,o=e.orbitEnabled,a=e.doDownload,r=e.setDoDownload,s=e.width,u=e.height,j=e.tool,d=e.mockups,b=Object(c.useRef)(),f=Object(c.useState)(null),O=Object(i.a)(f,2),v=O[0],y=O[1];return Object(l.b)((function(e){return function(e){if(a){var t=e.gl.domElement.toDataURL(),n=document.createElement("a");n.href=t,n.download="mockup_".concat(s,"x").concat(u,".png"),n.click(),r(!1)}}(e)})),Object(m.jsx)(c.Suspense,{fallback:null,children:Object(m.jsxs)("scene",{children:[Object(m.jsx)(h.a,{makeDefault:!0,enabled:o,ref:b}),Object(m.jsx)(x,{preset:"bridge2"}),Object(m.jsx)(w,{shadows:n}),Object(m.jsx)("group",{position:[0,0,0],dispose:null,children:d.map((function(e){var t={key:e.key,tool:j,orbit:b,activeModel:v,setActiveModel:y};switch(e.type){case"phone":return Object(m.jsx)(_,Object(p.a)({},t));case"suzanne":return Object(m.jsx)(P,Object(p.a)({},t))}}))}),Object(m.jsx)(g.a,{rotation:[Math.PI/2,0,0],position:[0,-7,0],opacity:.75,width:40,height:40,blur:1,far:9}),t&&Object(m.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[0,0,0],receiveShadow:!0,castShadow:!0,children:[Object(m.jsx)("planeBufferGeometry",{attach:"geometry",args:[15,15]}),Object(m.jsx)("shadowMaterial",{attach:"material",opacity:.4})]}),["translate","rotate","scale"].includes(j)&&Object(m.jsx)("gridHelper",{position:[0,0,0],args:[15,20,"white","#585858"]})]})})},I={phone:"Smartphone",suzanne:"Suzanne"};var A=function(){var e,t=Object(c.useState)(!1),n=Object(i.a)(t,2),o=n[0],a=n[1],r=Object(c.useState)(!0),j=Object(i.a)(r,2),p=j[0],h=j[1],g=Object(c.useState)(0),f=Object(i.a)(g,2),O=f[0],v=f[1],x=Object(c.useState)(!0),w=Object(i.a)(x,2),y=w[0],S=w[1],k=Object(c.useState)(!1),C=Object(i.a)(k,2),L=C[0],N=C[1],z=Object(c.useState)(""),E=Object(i.a)(z,2),R=E[0],B=E[1],M=Object(c.useState)([]),D=Object(i.a)(M,2),_=D[0],F=D[1],P=Object(c.useState)(!1),A=Object(i.a)(P,2),K=A[0],G=A[1],U=Object(c.useRef)(),W=Object(c.useRef)(),H=Object(c.useRef)(),J=Object(c.useRef)(),Q=Object(c.useRef)(),$=Object(c.useState)(!1),Y=Object(i.a)($,2),q=Y[0],V=Y[1],X=Object(c.useState)(1),Z=Object(i.a)(X,2),ee=Z[0],te=Z[1],ne=function(e){var t={Space:0,Digit1:0,KeyM:1,KeyF:1,Digit2:1,KeyQ:2,KeyG:2,Digit3:2,KeyW:3,KeyR:3,Digit4:3,KeyE:4,KeyS:4,Digit5:4};e.code in t&&te(t[e.code])},ce=function(){document.getElementsByClassName("App")[0].style.backgroundColor=U.current.value,B(U.current.value),N(!1)},oe=function(){var e=Math.max(1,W.current.value),t=Math.max(1,H.current.value),n=document.getElementsByClassName("canvasContainer")[0];n.style.width="".concat(e,"px"),n.style.height="".concat(t,"px");var c=window.innerWidth/e,o=window.innerHeight/t,a=Math.min(c,o);a=a<1?a-.02:1,J.current.style.transform="scale(".concat(a,")")},ae=function(e){F((function(t){return[].concat(Object(s.a)(t),[{key:d()(),type:e}])})),G(!1)};return Object(c.useEffect)((function(){L?(document.getElementsByClassName("App")[0].classList.add("alpha"),J.current.classList.add("alpha")):(document.getElementsByClassName("App")[0].classList.remove("alpha"),J.current.classList.remove("alpha"))}),[L]),Object(c.useEffect)((function(){return window.addEventListener("resize",oe),window.addEventListener("keypress",ne),W.current.value=window.innerWidth-20,H.current.value=window.innerHeight-20,v(20),U.current.value="#8A4CE6",ce(),N(!0),oe(),ae("phone"),function(){window.removeEventListener("resize",oe),window.removeEventListener("keypress",ne)}}),[]),Object(m.jsxs)("div",{className:"sceneContainer",children:[Object(m.jsxs)("div",{className:"toolBtnsContainer",children:[Object(m.jsx)("button",{className:"iconToggle tool ".concat(0===ee&&"active"),onClick:function(){return te(0)},"bottom-tooltip":"Drag (Space)",children:Object(m.jsx)(b.g,{color:"white",size:17})}),Object(m.jsx)("div",{className:"dividerSmall"}),Object(m.jsx)("button",{className:"iconToggle tool ".concat(1===ee&&"active"),onClick:function(){return te(1)},"bottom-tooltip":"Materials (M,F)",children:Object(m.jsx)(b.f,{color:"white",size:17})}),Object(m.jsx)("div",{className:"dividerSmall"}),Object(m.jsx)("button",{className:"iconToggle tool ".concat(2===ee&&"active"),onClick:function(){return te(2)},"bottom-tooltip":"Move (Q,G)",children:Object(m.jsx)(b.a,{color:"white",size:17})}),Object(m.jsx)("button",{className:"iconToggle tool ".concat(3===ee&&"active"),onClick:function(){return te(3)},"bottom-tooltip":"Rotate (W,R)",children:Object(m.jsx)(b.j,{color:"white",size:17})}),Object(m.jsx)("button",{className:"iconToggle tool ".concat(4===ee&&"active"),onClick:function(){return te(4)},"bottom-tooltip":"Scale (E,S)",children:Object(m.jsx)(b.c,{color:"white",size:17})})]}),Object(m.jsxs)("div",{className:"viewBtnsContainer",children:[Object(m.jsx)("button",{className:"iconToggle ".concat(p&&"active"),onClick:function(){return h(!p)},"bottom-tooltip":"Shadows",children:Object(m.jsx)(b.e,{color:"white",size:17})}),Object(m.jsx)("button",{className:"iconToggle ".concat(o&&p&&"active"),onClick:function(){return a(!o)},"bottom-tooltip":"Ground Shadows",children:Object(m.jsx)(b.d,{color:"white",size:17})}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsx)("button",{className:"iconToggle ".concat(!L&&"active"),onClick:function(){return N(!L)},"bottom-tooltip":"Background",children:Object(m.jsx)(b.k,{color:"white",size:17})}),Object(m.jsx)("input",{type:"color",onChange:ce,ref:U,style:{backgroundColor:null===(e=U.current)||void 0===e?void 0:e.value}}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsx)("input",{type:"number",onChange:oe,ref:W}),Object(m.jsx)("input",{type:"number",onChange:oe,ref:H}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsx)("input",{type:"range",value:O,min:"10",max:"50",step:2,onChange:function(e){return v(e.target.value)},className:"fovInp"}),Object(m.jsx)("button",{className:"iconToggle ".concat(!y&&"active"),onClick:function(){return S(!y)},"bottom-tooltip":"Lock Drag",children:Object(m.jsx)(b.h,{color:"white",size:17})})]}),Object(m.jsx)("div",{className:"addPopup",style:{transform:K?"scale(100%)":"scale(0%)"},children:Object.keys(I).map((function(e){return Object(m.jsxs)("button",{className:"addModelBtn",onClick:function(){return ae(e)},children:[Object(m.jsx)(b.i,{size:10,color:"white",style:{marginRight:"8px"}}),I[e]]},e)}))}),Object(m.jsx)("button",{className:"addBtn",onClick:function(){return G((function(e){return!e}))},children:Object(m.jsx)(b.i,{size:16,color:"white"})}),Object(m.jsx)("button",{className:"downloadBtn",onClick:function(){return V(!0)},children:Object(m.jsx)(b.b,{size:16,color:"white"})}),Object(m.jsx)("div",{className:"canvasContainer",children:Object(m.jsxs)(l.a,{shadows:!0,ref:J,gl:{preserveDrawingBuffer:!0,antialias:!0},children:[Object(m.jsx)(u.a,{makeDefault:!0,ref:Q,fov:O,position:[-1,2,7]}),Object(m.jsx)("group",{position:[0,-.5,0],children:Object(m.jsx)(T,{groundShadows:o,objectShadows:p,orbitEnabled:y,doDownload:q,setDoDownload:V,width:W.current?W.current.value:0,height:H.current?H.current.value:0,tool:["grab","materials","translate","rotate","scale"][ee],mockups:_})}),!L&&Object(m.jsx)("color",{attach:"background",args:[R]})]})})]})};var K=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(A,{})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),a(e),r(e)}))};r.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(K,{})}),document.getElementById("root")),G()}},[[59,1,2]]]);
//# sourceMappingURL=main.c2a1bb4d.chunk.js.map