{"version":3,"sources":["components/models/Mesh.js","components/models/BaseModel.js","components/models/phone.gltf","components/models/Phone.js","components/scene/MockupScene.js","components/scene/Scene.js","App.js","reportWebVitals.js","index.js"],"names":["MockupMesh","color","metalness","roughness","img","geometry","selectable","selected","setSelected","matRef","useRef","imgInpRef","colorInpRef","useState","borderColor","setBorderColor","metalnessInpRef","roughnessInpRef","imgUrl","setImgUrl","hovering","setHovering","updateImageUrl","evt","a","file","target","files","type","arrayBuffer","buffer","blob","Blob","urlCreator","window","URL","webkitURL","imageUrl","createObjectURL","useEffect","document","body","classList","add","remove","uuid","current","r","g","b","value","rgbToHex","Math","round","checked","Boolean","TextureLoader","load","tex","flipY","encoding","THREE","map","needsUpdate","anisotropy","onPointerOver","stopPropagation","onPointerLeave","onClick","setTimeout","onPointerMissed","castShadow","receiveShadow","ref","side","emissive","emissiveIntensity","Html","position","boundingBox","max","className","onChange","set","hexToRgb","style","backgroundColor","min","step","hex","replace","m","result","exec","parseInt","componentToHex","c","toString","length","BaseModel","props","selectedUid","setSelectedUid","dispose","children","meshData","undefined","mat","material","name","includes","Phone","useGLTF","PhoneModel","nodes","materials","Buttons","Flash","Bezel","Body","Lenses","Screen","preload","MockupScene","groundShadows","objectShadows","doDownload","setDoDownload","width","height","isCamSet","setIsCamSet","useFrame","state","gl","domElement","toDataURL","link","createElement","href","download","click","downloadImage","camera","Stage","contactShadow","shadows","adjustCamera","intensity","environment","preset","Scene","setGroundShadows","setObjectShadows","fov","setFov","orbitEnabled","setOrbitEnabled","hasAlpha","setHasAlpha","setColor","widthInpRef","heightInpRef","canvasRef","cameraRef","setBackgroundColor","getElementsByClassName","setCameraSize","elem","xScale","innerWidth","yScale","innerHeight","scale","transform","addEventListener","removeEventListener","bottom-tooltip","size","opacity","fallback","colorManagement","shadowMap","preserveDrawingBuffer","OrbitControls","makeDefault","enabled","PerspectiveCamera","near","far","attach","args","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.53f27c38.chunk.js","sourcesContent":["import React, { useRef, useState, useEffect } from 'react'\r\nimport { TextureLoader } from 'three'\r\nimport { Html } from '@react-three/drei'\r\nimport * as THREE from \"three\";\r\n\r\nimport { hexToRgb, rgbToHex } from './BaseModel';\r\n\r\nimport \"./Popup.css\";\r\n\r\n\r\nexport default function MockupMesh ({ color=\"white\", metalness=0, roughness=0.2, img=null, geometry=null, selectable=true,selected, setSelected }) {\r\n\r\n  const matRef = useRef()\r\n  const imgInpRef = useRef()\r\n  const colorInpRef = useRef()\r\n  const [borderColor, setBorderColor] = useState(color)\r\n  const metalnessInpRef = useRef()\r\n  const roughnessInpRef = useRef()\r\n\r\n  const [imgUrl, setImgUrl] = useState(img)\r\n  const [hovering, setHovering] = useState(false)\r\n\r\n\r\n  const setMeshColor = () => { matRef.current.color.set( hexToRgb(colorInpRef.current.value) ); setBorderColor(colorInpRef.current.value) }\r\n  const setMeshMetalness = () => { matRef.current.metalness = metalnessInpRef.current.checked ? 1 : 0 }\r\n  const setMeshRoughness = () => { matRef.current.roughness = roughnessInpRef.current.value }\r\n\r\n\r\n  const updateImageUrl = async (evt) => {\r\n    const file = evt.target.files[0]\r\n    const { type } = file\r\n    const buffer = await file.arrayBuffer()\r\n    const blob = new Blob([buffer], { type })\r\n    const urlCreator = window.URL || window.webkitURL\r\n    const imageUrl = urlCreator.createObjectURL(blob)\r\n    setImgUrl(imageUrl)\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    if (hovering) { document.body.classList.add(\"pointing\") }\r\n    else { document.body.classList.remove(\"pointing\") }\r\n  }, [hovering])\r\n\r\n\r\n  useEffect(() => {\r\n    if (selected === geometry.uuid) {\r\n      let { r, g, b } = matRef.current.color\r\n      colorInpRef.current.value = rgbToHex(Math.round(r*255), Math.round(g*255), Math.round(b*255))\r\n      metalnessInpRef.current.checked = Boolean(matRef.current.metalness)\r\n      roughnessInpRef.current.value = matRef.current.roughness\r\n    }\r\n  }, [selected])\r\n\r\n\r\n  useEffect(() => {\r\n    if (imgUrl) {\r\n      if (typeof(imgUrl) === typeof(\"\")) {\r\n          const textureLoader = new TextureLoader()\r\n          textureLoader.load(imgUrl, (tex) => {\r\n            tex.flipY = false\r\n            tex.encoding = THREE.sRGBEncoding\r\n            matRef.current.map = tex\r\n            matRef.current.needsUpdate = true\r\n          })\r\n      }\r\n      else {\r\n        imgUrl.anisotropy = 32\r\n        matRef.current.map = imgUrl\r\n      }\r\n    }\r\n  }, [imgUrl])\r\n\r\n  return (\r\n    <>\r\n    <group>\r\n      <mesh\r\n        onPointerOver={(evt)=>{\r\n          if (selectable) {\r\n            setHovering(true)\r\n            evt.stopPropagation()\r\n          }\r\n        }}\r\n        onPointerLeave={(evt)=>{\r\n          if (hovering) {\r\n            setHovering(false)\r\n            // evt.stopPropagation()\r\n          }\r\n        }}\r\n\r\n        onClick={(evt)=>{\r\n          setTimeout(() => {\r\n            selectable && setSelected(geometry.uuid)\r\n          }, 20);\r\n          evt.stopPropagation()\r\n        }}\r\n        onPointerMissed={(evt)=>{\r\n          setSelected(null)\r\n          evt.stopPropagation()\r\n        }}\r\n\r\n        castShadow\r\n        receiveShadow\r\n        geometry={geometry}\r\n      >\r\n        <meshStandardMaterial\r\n          ref={matRef}\r\n          color={color}\r\n          side={THREE.DoubleSide}\r\n          metalness={metalness}\r\n          roughness={roughness}\r\n          emissive={hovering ? \"orange\" : \"white\"}\r\n          emissiveIntensity={hovering ? 5 : 0}\r\n        />\r\n      </mesh>\r\n\r\n      {selected === geometry.uuid && <Html position={geometry.boundingBox.max}>\r\n        <div className=\"materialPopup\">\r\n          <p>Color</p>\r\n          <input type=\"color\" ref={colorInpRef} onChange={setMeshColor} style={{backgroundColor:borderColor}} />\r\n          {img && <>\r\n            <p>Image</p>\r\n            <input type=\"file\" ref={imgInpRef} onChange={updateImageUrl} />\r\n          </>}\r\n          <p>Metal</p>\r\n          <input type=\"checkbox\" ref={metalnessInpRef} onChange={setMeshMetalness} />\r\n          <p>Roughness</p>\r\n          <input type=\"range\" ref={roughnessInpRef} min=\"0\" max=\"1\" step={0.01} onChange={setMeshRoughness} />\r\n        </div>\r\n      </Html>}\r\n\r\n    </group>\r\n    </>\r\n  )\r\n}","import React, { useState } from 'react'\r\n\r\nimport MockupMesh from './Mesh';\r\n\r\n\r\nexport const hexToRgb = (hex) => {\r\n  // https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\r\n  var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n  hex = hex.replace(shorthandRegex, function(m, r, g, b) {\r\n    return r + r + g + g + b + b;\r\n  });\r\n\r\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n  return `rgb(${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)})`\r\n}\r\n\r\nfunction componentToHex(c) {\r\n  var hex = c.toString(16);\r\n  return hex.length == 1 ? \"0\" + hex : hex;\r\n}\r\n\r\nexport function rgbToHex(r, g, b) {\r\n  return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n}\r\n\r\n\r\nexport default function BaseModel(props) {\r\n    \r\n  const [selectedUid, setSelectedUid] = useState(null)\r\n\r\n  return (\r\n    <group {...props} dispose={null} >\r\n      {props.children.map(meshData => {\r\n        if (meshData.props.geometry === undefined) return\r\n\r\n        const mat = meshData.props.material\r\n        return <MockupMesh\r\n                  key={meshData.props.geometry.uuid}\r\n                  geometry={meshData.props.geometry}\r\n                  color={rgbToHex(Math.round(mat.color.r*255), Math.round(mat.color.g*255), Math.round(mat.color.b*255))}\r\n                  metalness={mat.metalness}\r\n                  roughness={mat.roughness}\r\n                  img={mat.map}\r\n                  selectable={mat.name.includes(\".editable\")}\r\n                  selected={selectedUid}\r\n                  setSelected={setSelectedUid}\r\n                />\r\n      })}\r\n    </group>\r\n  )\r\n}","export default __webpack_public_path__ + \"static/media/phone.48b23579.gltf\";","import React from 'react'\r\nimport { useGLTF } from '@react-three/drei'\r\nimport BaseModel from './BaseModel'\r\n\r\nimport PhoneModel from './phone.gltf'\r\n\r\nexport default function Phone(props) {\r\n\r\n  const { nodes, materials } = useGLTF(PhoneModel)\r\n\r\n  return (\r\n    <BaseModel {...props} >\r\n      <mesh\r\n        castShadow\r\n        receiveShadow\r\n        geometry={nodes.Buttons.geometry}\r\n        material={materials['Buttons.editable']}\r\n      />\r\n      <mesh castShadow receiveShadow geometry={nodes.Flash.geometry} material={materials.Flash} />\r\n      <mesh\r\n        castShadow\r\n        receiveShadow\r\n        geometry={nodes.Bezel.geometry}\r\n        material={materials['Bezel.editable']}\r\n      />\r\n      <mesh\r\n        castShadow\r\n        receiveShadow\r\n        geometry={nodes.Body.geometry}\r\n        material={materials['Body.editable']}\r\n      />\r\n      <mesh castShadow receiveShadow geometry={nodes.Lenses.geometry} material={materials.Lenses} />\r\n      <mesh\r\n        castShadow\r\n        receiveShadow\r\n        geometry={nodes.Screen.geometry}\r\n        material={materials['Screen.editable']}\r\n      />\r\n    </BaseModel>\r\n  )\r\n}\r\n\r\nuseGLTF.preload(PhoneModel)","import React, { useState, useEffect } from 'react'\r\n\r\nimport { useFrame, useThree } from '@react-three/fiber'\r\nimport { Stage } from '@react-three/drei'\r\n\r\nimport Phone from '../models/Phone'\r\n\r\n\r\nfunction MockupScene({ groundShadows, objectShadows, doDownload, setDoDownload, width, height }) {\r\n\r\n  const [isCamSet, setIsCamSet] = useState(false)\r\n\r\n  const downloadImage = (state) => {\r\n    if (!doDownload) return\r\n    \r\n    const img = state.gl.domElement.toDataURL()\r\n\r\n    const link = document.createElement(\"a\");\r\n    link.href = img;\r\n    link.download = `mockup_${width}x${height}.png`;\r\n    link.click();\r\n\r\n    setDoDownload(false)\r\n  }\r\n\r\n  useFrame((state) => downloadImage(state))\r\n\r\n  useFrame(({camera}) => {\r\n    if (isCamSet) return\r\n    camera.position.set(-0.25, 0.25, 0.7)\r\n    setIsCamSet(true)\r\n  })\r\n\r\n  return (\r\n    <scene>\r\n        <Stage contactShadow={groundShadows} shadows={objectShadows} adjustCamera intensity={1} environment=\"city\" preset=\"soft\" >\r\n\r\n          <Phone />\r\n\r\n        </Stage>\r\n    </scene>\r\n  );\r\n}\r\n\r\n\r\nexport default MockupScene;","import React, { useState, useRef, useEffect, Suspense } from 'react'\r\n\r\nimport { Canvas } from '@react-three/fiber'\r\nimport { OrbitControls, PerspectiveCamera } from '@react-three/drei'\r\n\r\nimport { FaCamera, FaTint, FaCube, FaCubes, FaCompass } from 'react-icons/fa';\r\n\r\nimport './Scene.css';\r\nimport MockupScene from './MockupScene';\r\n\r\n\r\nfunction Scene() {\r\n\r\n  const [doDownload, setDoDownload] = useState(false)\r\n\r\n  // VIEW SETTINGS\r\n  const [groundShadows, setGroundShadows] = useState(false)\r\n  const [objectShadows, setObjectShadows] = useState(true)\r\n\r\n  const [fov, setFov] = useState(0)\r\n\r\n  const [orbitEnabled, setOrbitEnabled] = useState(true)\r\n\r\n  const [hasAlpha, setHasAlpha] = useState(false)\r\n  const [color, setColor] = useState(\"\")\r\n  \r\n  const colorInpRef = useRef()\r\n  const widthInpRef = useRef()\r\n  const heightInpRef = useRef()\r\n\r\n  const canvasRef = useRef()\r\n  const cameraRef = useRef()\r\n  \r\n  const setBackgroundColor = () => {\r\n    document.getElementsByClassName(\"App\")[0].style.backgroundColor = colorInpRef.current.value\r\n    setColor(colorInpRef.current.value)\r\n    setHasAlpha(false)\r\n  }\r\n\r\n  const setCameraSize = () => {\r\n    const width = Math.max(1, widthInpRef.current.value)\r\n    const height = Math.max(1, heightInpRef.current.value)\r\n\r\n    const elem = document.getElementsByClassName(\"canvasContainer\")[0]\r\n    elem.style.width = `${width}px`\r\n    elem.style.height = `${height}px`\r\n    \r\n    const xScale = window.innerWidth / width\r\n    const yScale = window.innerHeight / height\r\n    let scale = Math.min(xScale, yScale)\r\n    scale = scale<1 ? scale-0.02 : 1\r\n\r\n    canvasRef.current.style.transform = `scale(${scale})`\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    if (hasAlpha) {\r\n      document.getElementsByClassName(\"App\")[0].classList.add(\"alpha\")\r\n      canvasRef.current.classList.add(\"alpha\")\r\n    } else {\r\n      document.getElementsByClassName(\"App\")[0].classList.remove(\"alpha\")\r\n      canvasRef.current.classList.remove(\"alpha\")\r\n    }\r\n  }, [hasAlpha])\r\n\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"resize\", setCameraSize)\r\n\r\n    // set default camera size\r\n    widthInpRef.current.value = window.innerWidth-20\r\n    heightInpRef.current.value = window.innerHeight-20\r\n    \r\n    // set default fov\r\n    setFov(20)\r\n    \r\n    // set default background color\r\n    colorInpRef.current.value = \"#8A4CE6\"\r\n    setBackgroundColor()\r\n    \r\n    // set alpha default\r\n    setHasAlpha(true)\r\n\r\n    setCameraSize()\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", setCameraSize)\r\n    }\r\n  }, [])\r\n\r\n\r\n  return (\r\n    <div className=\"sceneContainer\">\r\n\r\n      <div className=\"viewBtnsContainer\">\r\n\r\n        <button className=\"iconToggle\" onClick={() => setGroundShadows(!groundShadows)} bottom-tooltip=\"Ground Shadows\"><FaCube color=\"white\" size={17} style={{opacity:groundShadows?1:0.5}} /></button>\r\n        <button className=\"iconToggle\" onClick={() => setObjectShadows(!objectShadows)} bottom-tooltip=\"Object Shadows\"><FaCubes color=\"white\" size={17} style={{opacity:objectShadows?1:0.5}} /></button>\r\n        <div className=\"divider\"></div>\r\n        <button className=\"iconToggle\" onClick={() => setHasAlpha(!hasAlpha)} bottom-tooltip=\"Background\"><FaTint color=\"white\" size={17} style={{opacity:!hasAlpha?1:0.5}} /></button>\r\n        <input type=\"color\" onChange={setBackgroundColor} ref={colorInpRef} style={{backgroundColor: colorInpRef.current?.value}}></input>\r\n        <div className=\"divider\"></div>\r\n        <input type=\"number\" onChange={setCameraSize} ref={widthInpRef} />\r\n        <input type=\"number\" onChange={setCameraSize} ref={heightInpRef} />\r\n        <div className=\"divider\"></div>\r\n        <input type=\"range\" value={fov} min=\"10\" max=\"60\" step={1} onChange={(evt) => setFov(evt.target.value)} className=\"fovInp\" />\r\n        <button className=\"iconToggle\" onClick={() => setOrbitEnabled(!orbitEnabled)} bottom-tooltip=\"Orbit\"><FaCompass color=\"white\" size={17} style={{opacity:orbitEnabled?1:0.5}} /></button>\r\n      </div>\r\n\r\n      <button className=\"downloadBtn\" onClick={() => setDoDownload(true)}><FaCamera size={16} color=\"white\"/></button>\r\n\r\n      <div className=\"canvasContainer\">\r\n        <Suspense fallback={null}>\r\n          <Canvas colorManagement shadowMap shadows ref={canvasRef} gl={{ preserveDrawingBuffer: true }} >\r\n            <OrbitControls makeDefault enabled={orbitEnabled} />\r\n\r\n            <PerspectiveCamera makeDefault ref={cameraRef} fov={fov} near={0.0001} far={50} />\r\n\r\n            <MockupScene\r\n              groundShadows={groundShadows}\r\n              objectShadows={objectShadows}\r\n              doDownload={doDownload}\r\n              setDoDownload={setDoDownload}\r\n              width={widthInpRef.current ? widthInpRef.current.value : 0}\r\n              height={heightInpRef.current ? heightInpRef.current.value : 0}\r\n            />\r\n\r\n            {!hasAlpha && <color attach=\"background\" args={[color]} />}\r\n\r\n          </Canvas>\r\n        </Suspense>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default Scene;","import React, { useState } from 'react';\nimport './App.css';\n\nimport Scene from './components/scene/Scene';\n\nfunction App () {\n\n  return (\n    <div className=\"App\">\n      \n      <Scene />\n    \n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}