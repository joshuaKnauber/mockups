(this.webpackJsonpmockups=this.webpackJsonpmockups||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var c=n(5),a=n.n(c),o=n(23),r=n.n(o),s=(n(44),n(45),n(11)),i=n(12),u=n(57),l=n(54),d=n(24),j=(n(46),n(55)),b=n(10),h=n(56),m=n(14),O=n.n(m),f=n(20),p=n(0),g=n(53),v=(n(48),n(8));function x(e){var t=e.color,n=void 0===t?"white":t,a=e.metalness,o=void 0===a?0:a,r=e.roughness,i=void 0===r?.2:r,u=e.img,l=void 0===u?null:u,d=e.geometry,j=void 0===d?null:d,b=e.selectable,h=void 0===b||b,m=e.selected,x=e.setSelected,y=Object(c.useRef)(),C=Object(c.useRef)(),k=Object(c.useRef)(),B=Object(c.useState)(n),L=Object(s.a)(B,2),N=L[0],E=L[1],R=Object(c.useRef)(),M=Object(c.useRef)(),D=Object(c.useState)(l),z=Object(s.a)(D,2),P=z[0],F=z[1],I=Object(c.useState)(!1),T=Object(s.a)(I,2),A=T[0],U=T[1],G=function(){var e=Object(f.a)(O.a.mark((function e(t){var n,c,a,o,r,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],c=n.type,e.next=4,n.arrayBuffer();case 4:a=e.sent,o=new Blob([a],{type:c}),r=window.URL||window.webkitURL,s=r.createObjectURL(o),F(s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){A?document.body.classList.add("pointing"):document.body.classList.remove("pointing")}),[A]),Object(c.useEffect)((function(){if(m===j.uuid){var e=y.current.color,t=e.r,n=e.g,c=e.b;k.current.value=S(Math.round(255*t),Math.round(255*n),Math.round(255*c)),R.current.checked=Boolean(y.current.metalness),M.current.value=y.current.roughness}}),[m]),Object(c.useEffect)((function(){P&&("string"===typeof P?(new p.TextureLoader).load(P,(function(e){e.flipY=!1,e.encoding=p.sRGBEncoding,y.current.map=e,y.current.needsUpdate=!0})):(P.anisotropy=32,y.current.map=P))}),[P]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("group",{children:[Object(v.jsx)("mesh",{onPointerOver:function(e){h&&(U(!0),e.stopPropagation())},onPointerLeave:function(e){A&&U(!1)},onClick:function(e){setTimeout((function(){h&&x(j.uuid)}),20),e.stopPropagation()},onPointerMissed:function(e){x(null),e.stopPropagation()},castShadow:!0,receiveShadow:!0,geometry:j,children:Object(v.jsx)("meshStandardMaterial",{ref:y,color:n,side:p.DoubleSide,metalness:o,roughness:i,emissive:A?"orange":"white",emissiveIntensity:A?5:0})}),m===j.uuid&&Object(v.jsx)(g.a,{position:j.boundingBox.max,children:Object(v.jsxs)("div",{className:"materialPopup",children:[Object(v.jsx)("p",{children:"Color"}),Object(v.jsx)("input",{type:"color",ref:k,onChange:function(){y.current.color.set(w(k.current.value)),E(k.current.value)},style:{backgroundColor:N}}),l&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{children:"Image"}),Object(v.jsx)("input",{type:"file",ref:C,onChange:G})]}),Object(v.jsx)("p",{children:"Metal"}),Object(v.jsx)("input",{type:"checkbox",ref:R,onChange:function(){y.current.metalness=R.current.checked?1:0}}),Object(v.jsx)("p",{children:"Roughness"}),Object(v.jsx)("input",{type:"range",ref:M,min:"0",max:"1",step:.01,onChange:function(){y.current.roughness=M.current.value}})]})})]})})}var w=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,c){return t+t+n+n+c+c}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgb(".concat(parseInt(t[1],16),", ").concat(parseInt(t[2],16),", ").concat(parseInt(t[3],16),")")};function y(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function S(e,t,n){return"#"+y(e)+y(t)+y(n)}function C(e){var t=Object(c.useState)(null),n=Object(s.a)(t,2),a=n[0],o=n[1];return Object(v.jsx)("group",Object(b.a)(Object(b.a)({},e),{},{dispose:null,children:e.children.map((function(e){if(void 0!==e.props.geometry){var t=e.props.material;return Object(v.jsx)(x,{geometry:e.props.geometry,color:S(Math.round(255*t.color.r),Math.round(255*t.color.g),Math.round(255*t.color.b)),metalness:t.metalness,roughness:t.roughness,img:t.map,selectable:t.name.includes(".editable"),selected:a,setSelected:o},e.props.geometry.uuid)}}))}))}var k=n.p+"static/media/phone.48b23579.gltf";function B(e){var t=Object(h.a)(k),n=t.nodes,c=t.materials;return Object(v.jsxs)(C,Object(b.a)(Object(b.a)({},e),{},{children:[Object(v.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Buttons.geometry,material:c["Buttons.editable"]}),Object(v.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Flash.geometry,material:c.Flash}),Object(v.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Bezel.geometry,material:c["Bezel.editable"]}),Object(v.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Body.geometry,material:c["Body.editable"]}),Object(v.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Lenses.geometry,material:c.Lenses}),Object(v.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Screen.geometry,material:c["Screen.editable"]})]}))}h.a.preload(k);var L=function(e){var t=e.groundShadows,n=e.objectShadows,a=e.doDownload,o=e.setDoDownload,r=e.width,u=e.height,l=Object(c.useState)(!1),d=Object(s.a)(l,2),b=d[0],h=d[1];return Object(i.b)((function(e){return function(e){if(a){var t=e.gl.domElement.toDataURL(),n=document.createElement("a");n.href=t,n.download="mockup_".concat(r,"x").concat(u,".png"),n.click(),o(!1)}}(e)})),Object(i.b)((function(e){var t=e.camera;b||(t.position.set(-.25,.25,.7),h(!0))})),Object(v.jsx)("scene",{children:Object(v.jsx)(j.a,{contactShadow:t,shadows:n,adjustCamera:!0,intensity:1,environment:"city",preset:"soft",children:Object(v.jsx)(B,{})})})};var N=function(){var e,t=Object(c.useState)(!1),n=Object(s.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(!1),j=Object(s.a)(r,2),b=j[0],h=j[1],m=Object(c.useState)(!0),O=Object(s.a)(m,2),f=O[0],p=O[1],g=Object(c.useState)(0),x=Object(s.a)(g,2),w=x[0],y=x[1],S=Object(c.useState)(!0),C=Object(s.a)(S,2),k=C[0],B=C[1],N=Object(c.useState)(!1),E=Object(s.a)(N,2),R=E[0],M=E[1],D=Object(c.useState)(""),z=Object(s.a)(D,2),P=z[0],F=z[1],I=Object(c.useRef)(),T=Object(c.useRef)(),A=Object(c.useRef)(),U=Object(c.useRef)(),G=Object(c.useRef)(),H=function(){document.getElementsByClassName("App")[0].style.backgroundColor=I.current.value,F(I.current.value),M(!1)},J=function(){var e=Math.max(1,T.current.value),t=Math.max(1,A.current.value),n=document.getElementsByClassName("canvasContainer")[0];n.style.width="".concat(e,"px"),n.style.height="".concat(t,"px");var c=window.innerWidth/e,a=window.innerHeight/t,o=Math.min(c,a);o=o<1?o-.02:1,U.current.style.transform="scale(".concat(o,")")};return Object(c.useEffect)((function(){R?(document.getElementsByClassName("App")[0].classList.add("alpha"),U.current.classList.add("alpha")):(document.getElementsByClassName("App")[0].classList.remove("alpha"),U.current.classList.remove("alpha"))}),[R]),Object(c.useEffect)((function(){return window.addEventListener("resize",J),T.current.value=window.innerWidth-20,A.current.value=window.innerHeight-20,y(20),I.current.value="#8A4CE6",H(),M(!0),J(),function(){window.removeEventListener("resize",J)}}),[]),Object(v.jsxs)("div",{className:"sceneContainer",children:[Object(v.jsxs)("div",{className:"viewBtnsContainer",children:[Object(v.jsx)("button",{className:"iconToggle",onClick:function(){return h(!b)},"bottom-tooltip":"Ground Shadows",children:Object(v.jsx)(d.c,{color:"white",size:17,style:{opacity:b?1:.5}})}),Object(v.jsx)("button",{className:"iconToggle",onClick:function(){return p(!f)},"bottom-tooltip":"Object Shadows",children:Object(v.jsx)(d.d,{color:"white",size:17,style:{opacity:f?1:.5}})}),Object(v.jsx)("div",{className:"divider"}),Object(v.jsx)("button",{className:"iconToggle",onClick:function(){return M(!R)},"bottom-tooltip":"Background",children:Object(v.jsx)(d.e,{color:"white",size:17,style:{opacity:R?.5:1}})}),Object(v.jsx)("input",{type:"color",onChange:H,ref:I,style:{backgroundColor:null===(e=I.current)||void 0===e?void 0:e.value}}),Object(v.jsx)("div",{className:"divider"}),Object(v.jsx)("input",{type:"number",onChange:J,ref:T}),Object(v.jsx)("input",{type:"number",onChange:J,ref:A}),Object(v.jsx)("div",{className:"divider"}),Object(v.jsx)("input",{type:"range",value:w,min:"10",max:"60",step:1,onChange:function(e){return y(e.target.value)},className:"fovInp"}),Object(v.jsx)("button",{className:"iconToggle",onClick:function(){return B(!k)},"bottom-tooltip":"Orbit",children:Object(v.jsx)(d.b,{color:"white",size:17,style:{opacity:k?1:.5}})})]}),Object(v.jsx)("button",{className:"downloadBtn",onClick:function(){return o(!0)},children:Object(v.jsx)(d.a,{size:16,color:"white"})}),Object(v.jsx)("div",{className:"canvasContainer",children:Object(v.jsx)(c.Suspense,{fallback:null,children:Object(v.jsxs)(i.a,{colorManagement:!0,shadowMap:!0,shadows:!0,ref:U,gl:{preserveDrawingBuffer:!0},children:[Object(v.jsx)(u.a,{makeDefault:!0,enabled:k}),Object(v.jsx)(l.a,{makeDefault:!0,ref:G,fov:w,near:1e-4,far:50}),Object(v.jsx)(L,{groundShadows:b,objectShadows:f,doDownload:a,setDoDownload:o,width:T.current?T.current.value:0,height:A.current?A.current.value:0}),!R&&Object(v.jsx)("color",{attach:"background",args:[P]})]})})})]})};var E=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(N,{})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,58)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),o(e),r(e)}))};r.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(E,{})}),document.getElementById("root")),R()}},[[52,1,2]]]);
//# sourceMappingURL=main.53f27c38.chunk.js.map