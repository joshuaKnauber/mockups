(this.webpackJsonpmockups=this.webpackJsonpmockups||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var c=n(5),o=n.n(c),a=n(24),r=n.n(a),s=(n(44),n(45),n(11)),i=n(12),l=n(57),u=n(54),d=n(21),j=(n(46),n(55)),b=n(10),m=n(56),h=n(0),O=n(14),f=n.n(O),g=n(20),p=n(53),v=(n(48),n(8));function x(e){var t=e.color,n=void 0===t?"FFFFFF":t,o=e.metalness,a=void 0===o?0:o,r=e.roughness,i=void 0===r?.2:r,l=e.img,u=void 0===l?null:l,d=e.geometry,j=void 0===d?null:d,b=e.selectable,m=void 0===b||b,O=e.selected,x=e.setSelected,S=Object(c.useRef)(),C=Object(c.useRef)(),k=Object(c.useRef)(),N=Object(c.useState)("white"),B=Object(s.a)(N,2),L=B[0],D=B[1],E=Object(c.useRef)(),R=Object(c.useRef)(),F=Object(c.useState)(u),M=Object(s.a)(F,2),z=M[0],T=M[1],P=Object(c.useState)(!1),I=Object(s.a)(P,2),K=I[0],A=I[1],U=function(){var e=Object(g.a)(f.a.mark((function e(t){var n,c,o,a,r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],c=n.type,e.next=4,n.arrayBuffer();case 4:o=e.sent,a=new Blob([o],{type:c}),r=window.URL||window.webkitURL,s=r.createObjectURL(a),T(s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){K?document.body.classList.add("pointing"):document.body.classList.remove("pointing")}),[K]),Object(c.useEffect)((function(){if(O===j.uuid){var e=S.current.color,t=e.r,n=e.g,c=e.b,o=function(e,t,n){return"#"+y(e)+y(t)+y(n)}(Math.floor(255*t),Math.floor(255*n),Math.floor(255*c));k.current.value=o,D(o),E.current.checked=Boolean(S.current.metalness),R.current.value=S.current.roughness}}),[O]),Object(c.useEffect)((function(){z&&("string"===typeof z?(new h.TextureLoader).load(z,(function(e){e.flipY=!1,e.encoding=h.sRGBEncoding,S.current.map=e,S.current.needsUpdate=!0})):(z.anisotropy=32,S.current.map=z))}),[z]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("group",{children:[Object(v.jsx)("mesh",{onPointerOver:function(e){m&&(A(!0),e.stopPropagation())},onPointerLeave:function(e){K&&A(!1)},onClick:function(e){setTimeout((function(){m&&x(j.uuid)}),20),e.stopPropagation()},onPointerMissed:function(e){x(null),e.stopPropagation()},castShadow:!0,receiveShadow:!0,geometry:j,children:Object(v.jsx)("meshStandardMaterial",{ref:S,color:n,side:h.DoubleSide,metalness:a,roughness:i,emissive:K?"orange":"white",emissiveIntensity:K?5:0})}),O===j.uuid&&Object(v.jsx)(p.a,{position:j.boundingBox.max,children:Object(v.jsxs)("div",{className:"materialPopup",children:[Object(v.jsx)("p",{children:"Color"}),Object(v.jsx)("input",{type:"color",ref:k,onChange:function(){S.current.color.set(w(k.current.value)),D(k.current.value)},style:{backgroundColor:L}}),u&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{children:"Image"}),Object(v.jsx)("input",{type:"file",ref:C,onChange:U})]}),Object(v.jsx)("p",{children:"Metal"}),Object(v.jsx)("input",{type:"checkbox",ref:E,onChange:function(){S.current.metalness=E.current.checked?1:0}}),Object(v.jsx)("p",{children:"Roughness"}),Object(v.jsx)("input",{type:"range",ref:R,min:"0",max:"1",step:.01,onChange:function(){S.current.roughness=R.current.value}})]})})]})})}var w=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,c){return t+t+n+n+c+c}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgb(".concat(parseInt(t[1],16),", ").concat(parseInt(t[2],16),", ").concat(parseInt(t[3],16),")")};function y(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function S(e){var t=e.tool,n=Object(c.useState)(null),o=Object(s.a)(n,2),a=o[0],r=o[1];return Object(v.jsx)("group",Object(b.a)(Object(b.a)({},e),{},{dispose:null,children:e.children.map((function(e){if(void 0!==e.props.geometry){var n=e.props.material;return Object(v.jsx)(x,{geometry:e.props.geometry,color:n.map?new h.Color("rgb(127,127,127)"):n.color,metalness:n.metalness,roughness:n.roughness,img:n.map,selectable:n.name.includes(".editable")&&"materials"===t,selected:a,setSelected:r},e.props.geometry.uuid)}}))}))}var C=n.p+"static/media/phone.470c412e.gltf";function k(e){var t=Object(m.a)(C),n=t.nodes,c=t.materials;return Object(v.jsxs)(S,Object(b.a)(Object(b.a)({},e),{},{children:[Object(v.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Buttons.geometry,material:c["Buttons.editable"]}),Object(v.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Flash.geometry,material:c.Flash}),Object(v.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Bezel.geometry,material:c["Bezel.editable"]}),Object(v.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Body.geometry,material:c["Body.editable"]}),Object(v.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Lenses.geometry,material:c.Lenses}),Object(v.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Screen.geometry,material:c["Screen.editable"]})]}))}m.a.preload(C);var N=function(e){var t=e.groundShadows,n=e.objectShadows,o=e.doDownload,a=e.setDoDownload,r=e.width,l=e.height,u=e.tool,d=Object(c.useState)(!1),b=Object(s.a)(d,2),m=b[0],h=b[1];return Object(i.b)((function(e){return function(e){if(o){var t=e.gl.domElement.toDataURL(),n=document.createElement("a");n.href=t,n.download="mockup_".concat(r,"x").concat(l,".png"),n.click(),a(!1)}}(e)})),Object(i.b)((function(e){var t=e.camera;m||(t.position.set(-.25,.25,.7),h(!0))})),Object(v.jsx)("scene",{children:Object(v.jsx)(j.a,{contactShadow:t,shadows:n,adjustCamera:!0,intensity:1,environment:"city",preset:"soft",children:Object(v.jsx)(k,{tool:u})})})};var B=function(){var e,t=Object(c.useState)(!1),n=Object(s.a)(t,2),o=n[0],a=n[1],r=Object(c.useState)(!1),j=Object(s.a)(r,2),b=j[0],m=j[1],h=Object(c.useState)(!0),O=Object(s.a)(h,2),f=O[0],g=O[1],p=Object(c.useState)(0),x=Object(s.a)(p,2),w=x[0],y=x[1],S=Object(c.useState)(!0),C=Object(s.a)(S,2),k=C[0],B=C[1],L=Object(c.useState)(!1),D=Object(s.a)(L,2),E=D[0],R=D[1],F=Object(c.useState)(""),M=Object(s.a)(F,2),z=M[0],T=M[1],P=Object(c.useRef)(),I=Object(c.useRef)(),K=Object(c.useRef)(),A=Object(c.useRef)(),U=Object(c.useRef)(),G=Object(c.useState)(0),W=Object(s.a)(G,2),H=W[0],J=W[1],$=function(e){var t={Space:0,Digit1:0,KeyM:1,KeyF:1,Digit2:1,KeyQ:2,KeyG:2,Digit3:2,KeyW:3,KeyR:3,Digit4:3,KeyE:4,KeyS:4,Digit5:4};e.code in t&&J(t[e.code])},Q=function(){document.getElementsByClassName("App")[0].style.backgroundColor=P.current.value,T(P.current.value),R(!1)},Y=function(){var e=Math.max(1,I.current.value),t=Math.max(1,K.current.value),n=document.getElementsByClassName("canvasContainer")[0];n.style.width="".concat(e,"px"),n.style.height="".concat(t,"px");var c=window.innerWidth/e,o=window.innerHeight/t,a=Math.min(c,o);a=a<1?a-.02:1,A.current.style.transform="scale(".concat(a,")")};return Object(c.useEffect)((function(){E?(document.getElementsByClassName("App")[0].classList.add("alpha"),A.current.classList.add("alpha")):(document.getElementsByClassName("App")[0].classList.remove("alpha"),A.current.classList.remove("alpha"))}),[E]),Object(c.useEffect)((function(){return window.addEventListener("resize",Y),window.addEventListener("keypress",$),I.current.value=window.innerWidth-20,K.current.value=window.innerHeight-20,y(20),P.current.value="#8A4CE6",Q(),R(!0),Y(),function(){window.removeEventListener("resize",Y),window.removeEventListener("keypress",$)}}),[]),Object(v.jsxs)("div",{className:"sceneContainer",children:[Object(v.jsxs)("div",{className:"toolBtnsContainer",children:[Object(v.jsx)("button",{className:"iconToggle tool ".concat(0===H&&"active"),onClick:function(){return J(0)},"bottom-tooltip":"Drag (Space)",children:Object(v.jsx)(d.e,{color:"white",size:17})}),Object(v.jsx)("div",{className:"dividerSmall"}),Object(v.jsx)("button",{className:"iconToggle tool ".concat(1===H&&"active"),onClick:function(){return J(1)},"bottom-tooltip":"Materials (M,F)",children:Object(v.jsx)(d.d,{color:"white",size:17})}),Object(v.jsx)("div",{className:"dividerSmall"})]}),Object(v.jsxs)("div",{className:"viewBtnsContainer",children:[Object(v.jsx)("button",{className:"iconToggle ".concat(b&&"active"),onClick:function(){return m(!b)},"bottom-tooltip":"Ground Shadows",children:Object(v.jsx)(d.b,{color:"white",size:17})}),Object(v.jsx)("button",{className:"iconToggle ".concat(f&&"active"),onClick:function(){return g(!f)},"bottom-tooltip":"Object Shadows",children:Object(v.jsx)(d.c,{color:"white",size:17})}),Object(v.jsx)("div",{className:"divider"}),Object(v.jsx)("button",{className:"iconToggle ".concat(!E&&"active"),onClick:function(){return R(!E)},"bottom-tooltip":"Background",children:Object(v.jsx)(d.g,{color:"white",size:17})}),Object(v.jsx)("input",{type:"color",onChange:Q,ref:P,style:{backgroundColor:null===(e=P.current)||void 0===e?void 0:e.value}}),Object(v.jsx)("div",{className:"divider"}),Object(v.jsx)("input",{type:"number",onChange:Y,ref:I}),Object(v.jsx)("input",{type:"number",onChange:Y,ref:K}),Object(v.jsx)("div",{className:"divider"}),Object(v.jsx)("input",{type:"range",value:w,min:"10",max:"50",step:2,onChange:function(e){return y(e.target.value)},className:"fovInp"}),Object(v.jsx)("button",{className:"iconToggle ".concat(!k&&"active"),onClick:function(){return B(!k)},"bottom-tooltip":"Lock Drag",children:Object(v.jsx)(d.f,{color:"white",size:17})})]}),Object(v.jsx)("button",{className:"downloadBtn",onClick:function(){return a(!0)},children:Object(v.jsx)(d.a,{size:16,color:"white"})}),Object(v.jsx)("div",{className:"canvasContainer",children:Object(v.jsx)(c.Suspense,{fallback:null,children:Object(v.jsxs)(i.a,{colorManagement:!0,shadowMap:!0,shadows:!0,ref:A,gl:{preserveDrawingBuffer:!0},children:[Object(v.jsx)(l.a,{makeDefault:!0,enabled:k}),Object(v.jsx)(u.a,{makeDefault:!0,ref:U,fov:w,near:1e-4,far:50}),Object(v.jsx)(N,{groundShadows:b,objectShadows:f,doDownload:o,setDoDownload:a,width:I.current?I.current.value:0,height:K.current?K.current.value:0,tool:["grab","materials","translate","rotate","scale"][H]}),!E&&Object(v.jsx)("color",{attach:"background",args:[z]})]})})})]})};var L=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(B,{})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,58)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),a(e),r(e)}))};r.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(L,{})}),document.getElementById("root")),D()}},[[52,1,2]]]);
//# sourceMappingURL=main.4c8b50a3.chunk.js.map